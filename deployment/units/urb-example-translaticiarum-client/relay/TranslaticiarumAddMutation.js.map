{"version":3,"sources":["../../../../units/urb-example-translaticiarum-client/relay/TranslaticiarumAddMutation.js"],"names":["mutation","sharedUpdater","store","user","TranslaticiarumsEdge","userProxy","get","id","connection","getConnection","insertEdgeAfter","nextClientMutationId","commit","environment","Translaticiarum_Start","Translaticiarum_Stop","Translaticiarum_Description","clientMutationId","variables","input","updater","payload","getRootField","getLinkedRecord","optimisticUpdater","aTranslaticiarum","create","setValue","setLinkedRecord"],"mappings":";;AAEA;AACA;;AAEA,GAAMA,oGAAN;;;;;;;;;;;;;;;;;;;AAmBA,QAASC,cAAT,CAAuBC,KAAvB,CAA8BC,IAA9B,CAAoCC,oBAApC,CAA0D;AACxD,GAAMC,WAAYH,MAAMI,GAAN,CAAUH,KAAKI,EAAf,CAAlB;;AAEA,GAAMC,YAAa,gCAAkBC,aAAlB;AACjBJ,SADiB;AAEjB,sCAFiB,CAAnB;;AAIA,GAAIG,UAAJ,CAAgB;AACd,gCAAkBE,eAAlB,CAAkCF,UAAlC,CAA8CJ,oBAA9C;AACD;AACF;;AAED,GAAIO,sBAAuB,CAA3B;;AAEA,QAASC,OAAT;AACEC,WADF;AAEEV,IAFF;AAGEW,qBAHF;AAIEC,oBAJF;AAKEC,2BALF;AAME;AACA,GAAMC,kBAAmBN,sBAAzB;;AAEA,MAAO,+BAAeE,WAAf,CAA4B;AACjCb,iBADiC;AAEjCkB,UAAW;AACTC,MAAO;AACLL,2CADK;AAELC,yCAFK;AAGLC,uDAHK;AAILC,iCAJK,CADE,CAFsB;;;;AAWjCG,OAXiC,kBAWzBlB,KAXyB,CAWlB;AACb,GAAMmB,SAAUnB,MAAMoB,YAAN,CAAmB,oBAAnB,CAAhB;AACArB,cAAcC,KAAd,CAAqBC,IAArB,CAA2BkB,QAAQE,eAAR,CAAwB,sBAAxB,CAA3B;AACD,CAdgC;;AAgBjCC,iBAhBiC,4BAgBftB,KAhBe,CAgBR;AACvB,GAAMK,iDAAkDU,gBAAxD;AACA,GAAMQ,kBAAmBvB,MAAMwB,MAAN,CAAanB,EAAb,CAAiB,iBAAjB,CAAzB;AACAkB,iBAAiBE,QAAjB,CAA0Bb,qBAA1B,CAAiD,uBAAjD;AACAW,iBAAiBE,QAAjB,CAA0BZ,oBAA1B,CAAgD,sBAAhD;AACAU,iBAAiBE,QAAjB,CAA0BX,2BAA1B,CAAuD,6BAAvD;AACAS,iBAAiBE,QAAjB,CAA0BpB,EAA1B,CAA8B,IAA9B;;AAEA,GAAMH,sBAAuBF,MAAMwB,MAAN;AACuBT,gBADvB;AAE3B,sBAF2B,CAA7B;;AAIAb,qBAAqBwB,eAArB,CAAqCH,gBAArC,CAAuD,MAAvD;;AAEAxB,cAAcC,KAAd,CAAqBC,IAArB,CAA2BC,oBAA3B;AACD,CA/BgC,CAA5B,CAAP;;AAiCD,C;;AAEc,CAAEQ,aAAF,C","file":"TranslaticiarumAddMutation.js","sourcesContent":["// @flow weak\n\nimport { commitMutation, graphql } from 'react-relay'\nimport { ConnectionHandler } from 'relay-runtime'\n\nconst mutation = graphql`\n  mutation TranslaticiarumAddMutation($input: TranslaticiarumAddInput!) {\n    TranslaticiarumAdd(input: $input) {\n      Viewer {\n        id\n      }\n      TranslaticiarumsEdge {\n        cursor\n        node {\n          id\n          Translaticiarum_Start\n          Translaticiarum_Stop\n          Translaticiarum_Description\n        }\n      }\n    }\n  }\n`\n\nfunction sharedUpdater(store, user, TranslaticiarumsEdge) {\n  const userProxy = store.get(user.id)\n\n  const connection = ConnectionHandler.getConnection(\n    userProxy,\n    'TranslaticiarumList_Translaticiarums',\n  )\n  if (connection) {\n    ConnectionHandler.insertEdgeAfter(connection, TranslaticiarumsEdge)\n  }\n}\n\nlet nextClientMutationId = 0\n\nfunction commit(\n  environment,\n  user,\n  Translaticiarum_Start,\n  Translaticiarum_Stop,\n  Translaticiarum_Description,\n) {\n  const clientMutationId = nextClientMutationId++\n\n  return commitMutation(environment, {\n    mutation,\n    variables: {\n      input: {\n        Translaticiarum_Start,\n        Translaticiarum_Stop,\n        Translaticiarum_Description,\n        clientMutationId,\n      },\n    },\n\n    updater(store) {\n      const payload = store.getRootField('TranslaticiarumAdd')\n      sharedUpdater(store, user, payload.getLinkedRecord('TranslaticiarumsEdge'))\n    },\n\n    optimisticUpdater(store) {\n      const id = `client:TranslaticiarumAdd:Translaticiarum:${clientMutationId}`\n      const aTranslaticiarum = store.create(id, 'Translaticiarum')\n      aTranslaticiarum.setValue(Translaticiarum_Start, 'Translaticiarum_Start')\n      aTranslaticiarum.setValue(Translaticiarum_Stop, 'Translaticiarum_Stop')\n      aTranslaticiarum.setValue(Translaticiarum_Description, 'Translaticiarum_Description')\n      aTranslaticiarum.setValue(id, 'id')\n\n      const TranslaticiarumsEdge = store.create(\n        `client:TranslaticiarumAdd:TranslaticiarumsEdge:${clientMutationId}`,\n        'TranslaticiarumsEdge',\n      )\n      TranslaticiarumsEdge.setLinkedRecord(aTranslaticiarum, 'node')\n\n      sharedUpdater(store, user, TranslaticiarumsEdge)\n    },\n  })\n}\n\nexport default { commit }\n"]}