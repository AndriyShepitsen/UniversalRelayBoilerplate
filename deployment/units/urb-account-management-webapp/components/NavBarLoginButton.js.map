{"version":3,"sources":["../../../../units/urb-account-management-webapp/components/NavBarLoginButton.jsx"],"names":["styles","NavBarLoginButton","props","context","_handle_onClick_Login","setState","loginDialogIsOpen","userMenuIsOpen","_handle_onClick_Profile","_handle_Login_Close","_handle_onClick_UserMenu","anchorEl","event","currentTarget","_handle_UserMenu_Close","_handle_onClick_Logout","router","push","_handle_Login_NewUser","state","undefined","Viewer","User_IsAnonymous","User_DisplayName","Component","contextTypes","object"],"mappings":";;AAEA,0C;AACA,sC;AACA;AACA,qC;AACA,4B;AACA;;AAEA;;;;AAIA,0C;;AAEA,GAAMA,QAAS,QAATA,OAAS,cAAU,EAAV,EAAf,C;;AAEMC,iB;;;;;;;;;;;;;;;AAeJ,2BAAaC,KAAb,CAA4BC,OAA5B,CAA8C;AACrCD,KADqC,CAC9BC,OAD8B;;;;;;;;;;;;;;;;;;AAmB9CC,qBAnB8C,CAmBtB,UAAM;AAC5B,MAAKC,QAAL,CAAc,CAAEC,kBAAmB,IAArB,CAA2BC,eAAgB,KAA3C,CAAd;AACD,CArB6C;;AAuB9CC,uBAvB8C,CAuBpB,UAAM;AAC9B,MAAKH,QAAL,CAAc,CAAEE,eAAgB,KAAlB,CAAd;AACD,CAzB6C;;AA2B9CE,mBA3B8C,CA2BxB,UAAM;AAC1B,MAAKJ,QAAL,CAAc,CAAEC,kBAAmB,KAArB,CAAd;AACD,CA7B6C;;AA+B9CI,wBA/B8C,CA+BnB,eAAS;AAClC,MAAKL,QAAL,CAAc,CAAEE,eAAgB,IAAlB,CAAwBI,SAAUC,MAAMC,aAAxC,CAAd;AACD,CAjC6C;;AAmC9CC,sBAnC8C,CAmCrB,UAAM;AAC7B,MAAKT,QAAL,CAAc,CAAEE,eAAgB,KAAlB,CAAd;AACD,CArC6C;;AAuC9CQ,sBAvC8C,CAuCrB,UAAM;AAC7B,MAAKV,QAAL,CAAc,CAAEE,eAAgB,KAAlB,CAAd;AACA,MAAKJ,OAAL,CAAaa,MAAb,CAAoBC,IAApB,CAA0B,cAA1B;AACD,CA1C6C;;AA4C9CC,qBA5C8C,CA4CtB,UAAM;AAC5B,MAAKb,QAAL,CAAc,CAAEC,kBAAmB,KAArB,CAAd;;AAEA,MAAKH,OAAL,CAAaa,MAAb,CAAoBC,IAApB,CAA0B,WAA1B;AACD,CAhD6C,CAG5C,MAAKE,KAAL,CAAa,CACXR,SAAUS,SADC,CAEXd,kBAAmB,KAFR,CAGXC,eAAgB,KAHL,CAAb,CAH4C,aAQ7C,C,6FAGoB,CACnB,mEAAwC,KAAKH,qBAA7C,EACD,C,mEAEsB,CACrB,uEACD,C;;AAiCQ;AACwC,KAAKF,KAAL,CAAWmB,MADnD,CACCC,gBADD,eACCA,gBADD,CACmBC,gBADnB,eACmBA,gBADnB;AAEuC,KAAKJ,KAF5C,CAECb,iBAFD,QAECA,iBAFD,CAEoBC,cAFpB,QAEoBA,cAFpB;;AAIP;AACE;AACGe;AACC,gDAAQ,MAAM,UAAd,CAAyB,QAAS,KAAKlB,qBAAvC,UAFJ;;;;AAMG,CAACkB,gBAAD;AACC,gDAAQ,MAAM,UAAd,CAAyB,QAAS,KAAKZ,wBAAvC;AACGa,gBADH,CAPJ;;;AAWE;AACE,KAAMjB,iBADR;AAEE,aAAc,KAAKG,mBAFrB;AAGE,eAAgB,KAAKS,qBAHvB,EAXF;;AAgBE;AACE,GAAG,WADL;AAEE,SAAU,KAAKC,KAAL,CAAWR,QAFvB;AAGE,KAAMJ,cAHR;AAIE,eAAgB,KAAKO,sBAJvB;;AAME,8CAAU,IAAI,SAAd,CAAwB,QAAS,KAAKN,uBAAtC,YANF;;;AASE,8CAAU,IAAI,OAAd,CAAsB,QAAS,KAAKJ,qBAApC,8BATF;;;AAYE,8CAAU,IAAI,QAAd,CAAuB,QAAS,KAAKW,sBAArC,YAZF,CAhBF,CADF;;;;;;AAmCD,C,+BAxG6B,gBAAMS,S,EAAhCvB,iB,CAWGwB,Y,CAAe,CACpBT,OAAQ,oBAAUU,MADE,C;;;AAgGT;AACb,uBAAY1B,MAAZ,EAAsBC,iBAAtB,CADa,iG","file":"NavBarLoginButton.js","sourcesContent":["// @flow\n\nimport Button from 'material-ui/Button'\nimport Menu, { MenuItem } from 'material-ui/Menu'\nimport { withStyles } from 'material-ui/styles'\nimport PropTypes from 'prop-types'\nimport React from 'react'\nimport { createFragmentContainer, graphql } from 'react-relay'\n\nimport {\n  registerAuthenticationRequiredCallback,\n  unregisterAuthenticationRequiredCallback,\n} from './RequiresAuthentication'\nimport LoginDialog from './LoginDialog'\n\nconst styles = theme => ({})\n\nclass NavBarLoginButton extends React.Component<\n  {\n    Viewer: Object,\n    relay: Object\n  },\n  {\n    anchorEl: ?Object,\n    loginDialogIsOpen: boolean,\n    userMenuIsOpen: boolean\n  }\n> {\n  static contextTypes = {\n    router: PropTypes.object,\n  }\n\n  constructor( props: Object, context: Object ) {\n    super( props, context )\n\n    this.state = {\n      anchorEl: undefined,\n      loginDialogIsOpen: false,\n      userMenuIsOpen: false,\n    }\n  }\n\n  // Handle popping open the login dialog if authentication is required\n  componentWillMount() {\n    registerAuthenticationRequiredCallback( this._handle_onClick_Login )\n  }\n\n  componentWillUnmount() {\n    unregisterAuthenticationRequiredCallback()\n  }\n\n  _handle_onClick_Login = () => {\n    this.setState({ loginDialogIsOpen: true, userMenuIsOpen: false })\n  }\n\n  _handle_onClick_Profile = () => {\n    this.setState({ userMenuIsOpen: false })\n  }\n\n  _handle_Login_Close = () => {\n    this.setState({ loginDialogIsOpen: false })\n  }\n\n  _handle_onClick_UserMenu = event => {\n    this.setState({ userMenuIsOpen: true, anchorEl: event.currentTarget })\n  }\n\n  _handle_UserMenu_Close = () => {\n    this.setState({ userMenuIsOpen: false })\n  }\n\n  _handle_onClick_Logout = () => {\n    this.setState({ userMenuIsOpen: false })\n    this.context.router.push( '/user/logout' )\n  }\n\n  _handle_Login_NewUser = () => {\n    this.setState({ loginDialogIsOpen: false })\n\n    this.context.router.push( '/user/new' )\n  }\n\n  render() {\n    const { User_IsAnonymous, User_DisplayName } = this.props.Viewer\n    const { loginDialogIsOpen, userMenuIsOpen } = this.state\n\n    return (\n      <div>\n        {User_IsAnonymous && (\n          <Button color=\"contrast\" onClick={this._handle_onClick_Login}>\n            Login\n          </Button>\n        )}\n        {!User_IsAnonymous && (\n          <Button color=\"contrast\" onClick={this._handle_onClick_UserMenu}>\n            {User_DisplayName}\n          </Button>\n        )}\n        <LoginDialog\n          open={loginDialogIsOpen}\n          handlerClose={this._handle_Login_Close}\n          handlerNewUser={this._handle_Login_NewUser}\n        />\n        <Menu\n          id=\"lock-menu\"\n          anchorEl={this.state.anchorEl}\n          open={userMenuIsOpen}\n          onRequestClose={this._handle_UserMenu_Close}\n        >\n          <MenuItem key=\"profile\" onClick={this._handle_onClick_Profile}>\n            Profile\n          </MenuItem>\n          <MenuItem key=\"login\" onClick={this._handle_onClick_Login}>\n            Login as a different user\n          </MenuItem>\n          <MenuItem key=\"logout\" onClick={this._handle_onClick_Logout}>\n            Log out\n          </MenuItem>\n        </Menu>\n      </div>\n    )\n  }\n}\n\nexport default createFragmentContainer(\n  withStyles( styles )( NavBarLoginButton ),\n  graphql`\n    fragment NavBarLoginButton_Viewer on Viewer {\n      User_IsAnonymous\n      User_DisplayName\n    }\n  `\n)\n"]}